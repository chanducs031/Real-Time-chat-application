<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToxicRipple - Fluid Conversations</title>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #4f46e5;
            --secondary-color: #7c3aed;
            --accent-color-1: #10b981;
            --accent-color-2: #f59e0b;
            --bg-light: #f9fafb;
            --bg-dark: #111827;
            --text-light: #1f2937;
            --text-dark: #f3f4f6;
            --border-light: #e5e7eb;
            --border-dark: #374151;
            --message-bg-light: #ffffff;
            --message-bg-dark: #1f2937;
            --user-message-light: #4f46e5;
            --user-message-dark: #6366f1;
            --ripple-color: rgba(79, 70, 229, 0.3);
            --ripple-color-dark: rgba(99, 102, 241, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            height: 100vh;
            background: var(--bg-light);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            color: var(--text-light);
        }

        body.dark {
            background: var(--bg-dark);
            color: var(--text-dark);
        }

        .chat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--header-bg-light);
            border-bottom: 1px solid var(--border-light);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            z-index: 10;
        }

        body.dark .chat-header {
            background: var(--header-bg-dark);
            border-bottom-color: var(--border-dark);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .app-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .app-icon::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, var(--ripple-color) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .app-icon:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .app-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-light);
        }

        body.dark .app-title {
            color: var(--text-dark);
        }

        .app-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .online-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #6b7280;
            font-size: 0.875rem;
        }

        .theme-toggle, .sound-toggle {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            border: none;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .theme-toggle::after, .sound-toggle::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .theme-toggle:active::after, .sound-toggle:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .theme-toggle:hover, .sound-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background-image: radial-gradient(circle at center, transparent 0%, rgba(79, 70, 229, 0.03) 100%);
        }

        body.dark .messages-container {
            background-image: radial-gradient(circle at center, transparent 0%, rgba(99, 102, 241, 0.05) 100%);
        }

        .messages-wrapper {
            max-width: 64rem;
            margin: 0 auto;
        }

        .message {
            display: flex;
            margin-bottom: 1rem;
            animation: messageIn 0.3s ease-out;
            position: relative;
            group: message;
        }

        .message:hover .message-actions {
            opacity: 1;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message.other {
            justify-content: flex-start;
        }

        .message-content {
            max-width: 70%;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .message-avatar {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            margin: 0 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
            cursor: pointer;
        }

        .message-avatar::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .message-avatar:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--accent-color-1), #059669);
            color: white;
            order: 2;
        }

        .message.other .message-avatar {
            background: linear-gradient(135deg, var(--accent-color-2), #d97706);
            color: white;
        }

        .sender-name {
            font-size: 0.75rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
            padding: 0 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .online-indicator {
            width: 0.5rem;
            height: 0.5rem;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .message-bubble {
            padding: 0.75rem 1rem;
            border-radius: 1.25rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .message-bubble::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, var(--ripple-color) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .message-bubble:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .message-bubble:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--user-message-light), #3730a3);
            color: white;
            border-bottom-right-radius: 0.5rem;
        }

        body.dark .message.user .message-bubble {
            background: linear-gradient(135deg, var(--user-message-dark), #4c1d95);
        }

        .message.other .message-bubble {
            background: var(--message-bg-light);
            color: var(--text-light);
            border-bottom-left-radius: 0.5rem;
        }

        body.dark .message.other .message-bubble {
            background: var(--message-bg-dark);
            color: var(--text-dark);
        }

        .message-text {
            font-size: 0.875rem;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        .message-time {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
            padding: 0 0.25rem;
            opacity: 0.7;
        }

        .message.user .message-time {
            text-align: right;
        }

        .message-actions {
            position: absolute;
            top: -0.5rem;
            right: 0.5rem;
            display: flex;
            gap: 0.25rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            background: rgba(0,0,0,0.7);
            border-radius: 1rem;
            padding: 0.25rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .message.user .message-actions {
            right: auto;
            left: 0.5rem;
        }

        .action-btn {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            border: none;
            background: transparent;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .action-btn::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .action-btn:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .emoji-reactions {
            display: flex;
            gap: 0.25rem;
            margin-top: 0.5rem;
            flex-wrap: wrap;
        }

        .emoji-reaction {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid var(--border-light);
            border-radius: 1rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            position: relative;
            overflow: hidden;
        }

        .emoji-reaction::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, var(--ripple-color) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .emoji-reaction:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        body.dark .emoji-reaction {
            background: rgba(45, 55, 72, 0.9);
            border-color: var(--border-dark);
        }

        .emoji-reaction:hover {
            transform: scale(1.05);
        }

        .emoji-reaction.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .typing-indicator {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 1rem;
            display: none;
        }

        .typing-indicator.show {
            display: flex;
        }

        .typing-content {
            max-width: 70%;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .typing-text {
            font-size: 0.75rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
            padding: 0 0.25rem;
        }

        .typing-bubble {
            background: var(--message-bg-light);
            padding: 0.75rem 1rem;
            border-radius: 1.25rem;
            border-bottom-left-radius: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.dark .typing-bubble {
            background: var(--message-bg-dark);
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 0.5rem;
            height: 0.5rem;
            background: #6b7280;
            border-radius: 50%;
            animation: typing 1.4s ease-in-out infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        .chat-input-container {
            border-top: 1px solid var(--border-light);
            background: var(--header-bg-light);
            transition: all 0.3s ease;
        }

        body.dark .chat-input-container {
            border-top-color: var(--border-dark);
            background: var(--header-bg-dark);
        }

        .chat-input-wrapper {
            max-width: 64rem;
            margin: 0 auto;
            padding: 1rem;
        }

        .input-form {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .message-input {
            width: 100%;
            background: var(--bg-light);
            border: 1px solid var(--border-light);
            border-radius: 1.5rem;
            padding: 0.75rem 1rem;
            height: 3rem;
            font-size: 0.875rem;
            outline: none;
            transition: all 0.3s ease;
            color: var(--text-light);
        }

        body.dark .message-input {
            background: var(--bg-dark);
            border-color: var(--border-dark);
            color: var(--text-dark);
        }

        .message-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
        }

        .send-button {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .send-button::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .send-button:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .send-button:hover {
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
            transform: translateY(-1px);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .action-buttons-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
            justify-content: center;
        }

        .action-button {
            padding: 0.75rem 1.25rem;
            border-radius: 1.5rem;
            border: none;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .action-button::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .action-button:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .action-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .action-button.primary {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }
        .action-button.secondary {
            background: linear-gradient(135deg, #06b6d4, #22d3ee);
            color: white;
        }
        .action-button.tertiary {
            background: linear-gradient(135deg, #ef4444, #f87171);
            color: white;
        }
        .action-button.quaternary {
            background: linear-gradient(135deg, #a855f7, #c084fc);
            color: white;
        }
        .action-button.quinary {
            background: linear-gradient(135deg, #22c55e, #34d399);
            color: white;
        }
        .action-button.senary {
            background: linear-gradient(135deg, #f97316, #fb923c);
            color: white;
        }

        .select-language {
            padding: 0.75rem 1rem;
            border-radius: 1.5rem;
            border: 1px solid var(--border-light);
            background: var(--bg-light);
            color: var(--text-light);
            font-size: 0.875rem;
            outline: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        body.dark .select-language {
            background: var(--bg-dark);
            border-color: var(--border-dark);
            color: var(--text-dark);
        }

        .select-language:hover {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: var(--message-bg-light);
            border-radius: 1rem;
            padding: 2rem;
            max-width: 90%;
            width: 500px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: scaleIn 0.3s ease-out;
            color: var(--text-light);
        }

        body.dark .modal-content {
            background: var(--message-bg-dark);
            color: var(--text-dark);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-light);
        }

        body.dark .modal-header {
            border-bottom-color: var(--border-dark);
        }

        .modal-header h3 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .modal-body {
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            white-space: pre-wrap;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
        }

        .modal-close-btn {
            background: #ef4444;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .modal-close-btn::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 1s;
        }

        .modal-close-btn:active::after {
            transform: scale(0, 0);
            opacity: 0.5;
            transition: 0s;
        }

        .modal-close-btn:hover {
            background: #dc2626;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.4);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .messages-container {
                padding: 0.5rem;
            }
            
            .chat-input-wrapper {
                padding: 0.5rem;
            }
            
            .message-content {
                max-width: 85%;
            }

            .header-right {
                gap: 0.5rem;
            }

            .online-status span:last-child {
                display: none;
            }

            .input-form {
                flex-direction: column;
                gap: 0.5rem;
            }

            .send-button {
                width: 100%;
                border-radius: 0.75rem;
                height: auto;
                padding: 0.75rem 1rem;
            }

            .action-buttons-group {
                flex-direction: column;
                align-items: stretch;
            }

            .action-button, .select-language {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="chat-header">
        <div class="header-left">
            <div class="app-icon">ðŸŒŠ</div>
            <div>
                <div class="app-title">ToxicRipple</div>
                <div class="app-subtitle">Fluid conversations</div>
            </div>
        </div>
        <div class="header-right">
            <div class="online-status">
                <span>ðŸ‘¥</span>
                <span>2 online</span>
            </div>
            <button class="sound-toggle" id="soundToggle" title="Toggle sound">
                <i class="fas fa-volume-up"></i>
            </button>
            <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </div>

    <!-- Messages Container -->
    <div class="messages-container" id="messagesContainer">
        <div class="messages-wrapper" id="messagesWrapper">
            <!-- Initial message -->
            <div class="message other" data-id="1">
                <div class="message-avatar">ðŸŒŠ</div>
                <div class="message-content">
                    <div class="sender-name">
                        RippleBot
                        <div class="online-indicator"></div>
                    </div>
                    <div class="message-bubble">
                        <div class="message-text">Welcome to ChatRipple! ðŸŒŠ Your messages create ripples in the conversation. Try clicking around to see the ripple effect!</div>
                    </div>
                    <div class="message-time" id="initialTime"></div>
                    <div class="message-actions">
                        <button class="action-btn" onclick="reactToMessage('1', 'ðŸŒŠ')" title="Ripple"><i class="fas fa-water"></i></button>
                        <button class="action-btn" onclick="reactToMessage('1', 'ðŸ‘')" title="Like"><i class="fas fa-thumbs-up"></i></button>
                        <button class="action-btn" onclick="reactToMessage('1', 'â¤ï¸')" title="Love"><i class="fas fa-heart"></i></button>
                        <button class="action-btn" onclick="deleteMessage('1')" title="Delete"><i class="fas fa-trash-alt"></i></button>
                    </div>
                    <div class="emoji-reactions" id="reactions-1"></div>
                </div>
            </div>

            <!-- Typing indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="message-avatar">ðŸŒŠ</div>
                <div class="typing-content">
                    <div class="typing-text">ToxicBot is typing...</div>
                    <div class="typing-bubble">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Input and Action Buttons -->
    <div class="chat-input-container">
        <div class="chat-input-wrapper">
            <form class="input-form" id="chatForm">
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        class="message-input" 
                        id="messageInput" 
                        placeholder="Send a ripple..."
                        autocomplete="off"
                    >
                </div>
                <button type="submit" class="send-button" id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
            <div class="action-buttons-group">
                <select id="languageSelect" class="select-language">
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                    <option value="en" selected>English (Default)</option>
                </select>
                <button class="action-button primary" id="translateButton">
                    <i class="fas fa-language"></i> Translate Last Message
                </button>
                <button class="action-button secondary" id="jokeButton">
                    <i class="fas fa-laugh-squint"></i> Tell Me a Joke
                </button>
                <button class="action-button tertiary" id="factButton">
                    <i class="fas fa-lightbulb"></i> Random Fact
                </button>
                <button class="action-button quinary" id="summarizeButton">
                    <i class="fas fa-file-alt"></i> Summarize Chat
                </button>
                <button class="action-button senary" id="sentimentButton">
                    <i class="fas fa-smile-beam"></i> Analyze Sentiment
                </button>
                <button class="action-button quaternary" id="elaborateButton">
                    <i class="fas fa-pen-nib"></i> Elaborate
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Modals for new features -->
    <div id="translateModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-language"></i> Translated Message</h3>
            </div>
            <div class="modal-body" id="translatedTextContent"></div>
            <div class="modal-footer">
                <button class="modal-close-btn" onclick="closeModal('translateModal')"><i class="fas fa-times"></i> Close</button>
            </div>
        </div>
    </div>

    <div id="jokeModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-laugh-squint"></i> Here's a Joke!</h3>
            </div>
            <div class="modal-body" id="jokeTextContent"></div>
            <div class="modal-footer">
                <button class="modal-close-btn" onclick="closeModal('jokeModal')"><i class="fas fa-times"></i> Close</button>
            </div>
        </div>
    </div>

    <div id="factModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-lightbulb"></i> Interesting Fact!</h3>
            </div>
            <div class="modal-body" id="factTextContent"></div>
            <div class="modal-footer">
                <button class="modal-close-btn" onclick="closeModal('factModal')"><i class="fas fa-times"></i> Close</button>
            </div>
        </div>
    </div>

    <div id="summarizeModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-file-alt"></i> Chat Summary</h3>
            </div>
            <div class="modal-body" id="summarizeTextContent"></div>
            <div class="modal-footer">
                <button class="modal-close-btn" onclick="closeModal('summarizeModal')"><i class="fas fa-times"></i> Close</button>
            </div>
        </div>
    </div>

    <div id="sentimentModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-smile-beam"></i> Message Sentiment</h3>
            </div>
            <div class="modal-body" id="sentimentTextContent"></div>
            <div class="modal-footer">
                <button class="modal-close-btn" onclick="closeModal('sentimentModal')"><i class="fas fa-times"></i> Close</button>
            </div>
        </div>
    </div>

    <div id="elaborateModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-pen-nib"></i> Elaboration</h3>
            </div>
            <div class="modal-body" id="elaborateTextContent"></div>
            <div class="modal-footer">
                <button class="modal-close-btn" onclick="closeModal('elaborateModal')"><i class="fas fa-times"></i> Close</button>
            </div>
        </div>
    </div>

    <!-- Audio for notifications -->
    <audio id="messageSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt59NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmshCCCC0fPZdSMFl1q17+V5KEJOqu6+tlYfCiCV3vSsWQwSWanl8EJHZ9gMHBWl6CQZN8MFxKf5igKYt4KGhKj6SMLYdkJFhKi6CAQb+7oaF9+OOw6f1QmFqXpJw5h3gohEKLrJA9i3AkZ" type="audio/wav">
    </audio>

    <script>
        // Enhanced responses for demo
        const responses = [
            "Hello! How can I help you today? ðŸŒŠ",
            "That's an interesting question! Let me think about it ðŸ¤”",
            "I understand what you're asking. Here's my thoughts ðŸ’­",
            "Let me think about that for a moment... ðŸ§ ",
            "Great point! Here's what I think about that ðŸ’¡",
            "Thanks for sharing that with me! ðŸ™",
            "I appreciate you reaching out! It's always nice to chat ðŸ˜Š",
            "That makes perfect sense! I completely agree ðŸ‘",
            "I'm here to help with whatever you need! ðŸ¤",
            "Absolutely! I'd be happy to assist you with that ðŸŒŸ",
            "That's a fantastic question! Let me elaborate ðŸ“š",
            "I love discussing topics like this! ðŸ”¥",
            "You've got a great perspective on this! ðŸŽ¯",
            "That's something worth exploring further ðŸ”",
            "I can definitely help you with that! âœ¨"
        ];

        let messageId = 2;
        let isTyping = false;
        let soundEnabled = true;
        let darkMode = false;
        let messageReactions = {};

        // DOM elements
        const messagesWrapper = document.getElementById('messagesWrapper');
        const messageInput = document.getElementById('messageInput');
        const chatForm = document.getElementById('chatForm');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const messagesContainer = document.getElementById('messagesContainer');
        const themeToggle = document.getElementById('themeToggle');
        const soundToggle = document.getElementById('soundToggle');
        const notification = document.getElementById('notification');
        const messageSound = document.getElementById('messageSound');

        // New feature buttons and elements
        const languageSelect = document.getElementById('languageSelect');
        const translateButton = document.getElementById('translateButton');
        const jokeButton = document.getElementById('jokeButton');
        const factButton = document.getElementById('factButton');
        const summarizeButton = document.getElementById('summarizeButton');
        const sentimentButton = document.getElementById('sentimentButton');
        const elaborateButton = document.getElementById('elaborateButton');

        const translateModal = document.getElementById('translateModal');
        const translatedTextContent = document.getElementById('translatedTextContent');
        const jokeModal = document.getElementById('jokeModal');
        const jokeTextContent = document.getElementById('jokeTextContent');
        const factModal = document.getElementById('factModal');
        const factTextContent = document.getElementById('factTextContent');
        const summarizeModal = document.getElementById('summarizeModal');
        const summarizeTextContent = document.getElementById('summarizeTextContent');
        const sentimentModal = document.getElementById('sentimentModal');
        const sentimentTextContent = document.getElementById('sentimentTextContent');
        const elaborateModal = document.getElementById('elaborateModal');
        const elaborateTextContent = document.getElementById('elaborateTextContent');

        // State for new features
        let isTranslating = false;
        let isGeneratingJoke = false;
        let isGeneratingFact = false;
        let isSummarizing = false;
        let isAnalyzingSentiment = false;
        let isElaborating = false;

        // Set initial timestamp
        document.getElementById('initialTime').textContent = formatTime(new Date());

        // Format time function
        function formatTime(date) {
            return date.toLocaleTimeString([], { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }

        // Scroll to bottom function
        function scrollToBottom() {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Show notification
        function showNotification(text) {
            notification.textContent = text;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Play notification sound
        function playNotificationSound() {
            if (soundEnabled) {
                try {
                    messageSound.currentTime = 0;
                    messageSound.play().catch(e => console.log('Audio play failed:', e));
                } catch (e) {
                    console.log('Audio not supported');
                }
            }
        }

        // Toggle theme
        function toggleTheme() {
            darkMode = !darkMode;
            document.body.classList.toggle('dark', darkMode);
            themeToggle.innerHTML = darkMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            localStorage.setItem('darkMode', darkMode);
            showNotification(`${darkMode ? 'Dark' : 'Light'} mode enabled!`);
        }

        // Toggle sound
        function toggleSound() {
            soundEnabled = !soundEnabled;
            soundToggle.innerHTML = soundEnabled ? '<i class="fas fa-volume-up"></i>' : '<i class="fas fa-volume-mute"></i>';
            localStorage.setItem('soundEnabled', soundEnabled);
            showNotification(`Sound ${soundEnabled ? 'enabled' : 'disabled'}!`);
        }

        // React to message
        function reactToMessage(messageId, emoji) {
            if (!messageReactions[messageId]) {
                messageReactions[messageId] = {};
            }
            
            if (!messageReactions[messageId][emoji]) {
                messageReactions[messageId][emoji] = 0;
            }
            
            messageReactions[messageId][emoji]++;
            updateReactionsDisplay(messageId);
            playNotificationSound();
        }

        // Update reactions display
        function updateReactionsDisplay(messageId) {
            const reactionsContainer = document.getElementById(`reactions-${messageId}`);
            if (!reactionsContainer || !messageReactions[messageId]) return;

            reactionsContainer.innerHTML = '';
            
            for (const [emoji, count] of Object.entries(messageReactions[messageId])) {
                if (count > 0) {
                    const reactionEl = document.createElement('div');
                    reactionEl.className = 'emoji-reaction';
                    reactionEl.innerHTML = `${emoji} ${count}`;
                    reactionEl.onclick = () => reactToMessage(messageId, emoji);
                    reactionsContainer.appendChild(reactionEl);
                }
            }
        }

        // Delete message
        function deleteMessage(messageId) {
            const messageEl = document.querySelector(`[data-id="${messageId}"]`);
            if (messageEl) {
                messageEl.style.animation = 'messageOut 0.3s ease-out forwards';
                setTimeout(() => messageEl.remove(), 300);
                showNotification('Message deleted!');
            }
        }

        // Create message element
        function createMessageElement(text, sender, timestamp, senderName = '', id = null) {
            const msgId = id || messageId++;
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.setAttribute('data-id', msgId);
            
            const avatar = sender === 'user' ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
            const onlineIndicator = sender === 'other' ? '<div class="online-indicator"></div>' : '';
            
            messageDiv.innerHTML = `
                ${sender === 'user' ? '' : `<div class="message-avatar">${avatar}</div>`}
                <div class="message-content">
                    ${sender === 'other' ? `<div class="sender-name">${senderName} ${onlineIndicator}</div>` : ''}
                    <div class="message-bubble">
                        <div class="message-text">${text}</div>
                    </div>
                    <div class="message-time">${formatTime(timestamp)}</div>
                    <div class="message-actions">
                        <button class="action-btn" onclick="reactToMessage('${msgId}', 'ðŸŒŠ')" title="Ripple"><i class="fas fa-water"></i></button>
                        <button class="action-btn" onclick="reactToMessage('${msgId}', 'ðŸ‘')" title="Like"><i class="fas fa-thumbs-up"></i></button>
                        <button class="action-btn" onclick="reactToMessage('${msgId}', 'â¤ï¸')" title="Love"><i class="fas fa-heart"></i></button>
                        <button class="action-btn" onclick="deleteMessage('${msgId}')" title="Delete"><i class="fas fa-trash-alt"></i></button>
                    </div>
                    <div class="emoji-reactions" id="reactions-${msgId}"></div>
                </div>
                ${sender === 'user' ? `<div class="message-avatar">${avatar}</div>` : ''}
            `;
            
            // Initialize reactions for this message
            messageReactions[msgId] = {};
            
            return messageDiv;
        }

        // Send message function
        function sendMessage(text) {
            if (!text.trim() || isTyping) return;

            // Add user message
            const userMessage = createMessageElement(text, 'user', new Date());
            messagesWrapper.insertBefore(userMessage, typingIndicator);
            
            // Clear input
            messageInput.value = '';
            updateSendButton();
            
            // Show typing indicator
            isTyping = true;
            typingIndicator.classList.add('show');
            
            // Scroll to bottom
            setTimeout(scrollToBottom, 100);

            // Simulate response after delay
            const responseDelay = 1500 + Math.random() * 1000; // 1.5-2.5 seconds
            setTimeout(() => {
                // Hide typing indicator
                typingIndicator.classList.remove('show');
                
                // Add assistant response
                const responseText = responses[Math.floor(Math.random() * responses.length)];
                const assistantMessage = createMessageElement(responseText, 'other', new Date(), 'RippleBot');
                messagesWrapper.insertBefore(assistantMessage, typingIndicator);
                
                isTyping = false;
                updateSendButton();
                
                // Play notification sound
                playNotificationSound();
                
                // Scroll to bottom
                setTimeout(scrollToBottom, 100);
            }, responseDelay);
        }

        // Update send button state
        function updateSendButton() {
            const hasText = messageInput.value.trim().length > 0;
            sendButton.disabled = !hasText || isTyping;
            // Also disable new feature buttons if no messages are present
            const hasMessages = messagesWrapper.children.length > 1; // More than just the initial message + typing indicator
            translateButton.disabled = !hasMessages || isTranslating;
            jokeButton.disabled = isGeneratingJoke;
            factButton.disabled = isGeneratingFact;
            summarizeButton.disabled = !hasMessages || isSummarizing;
            sentimentButton.disabled = !hasMessages || isAnalyzingSentiment;
            elaborateButton.disabled = !hasMessages || isElaborating;
        }

        // Load saved preferences
        function loadPreferences() {
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            const savedSoundEnabled = localStorage.getItem('soundEnabled') !== 'false';
            
            if (savedDarkMode) {
                darkMode = true;
                document.body.classList.add('dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            soundEnabled = savedSoundEnabled;
            soundToggle.innerHTML = soundEnabled ? '<i class="fas fa-volume-up"></i>' : '<i class="fas fa-volume-mute"></i>';
        }

        // Open modal function
        function openModal(modalId, contentElement, text) {
            contentElement.textContent = text;
            document.getElementById(modalId).style.display = 'flex';
        }

        // Close modal function
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Simulated AI functions (replace with actual API calls in production)
        async function simulateAIRequest(prompt) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1500 + Math.random() * 1000));
            
            // Simulate different responses based on prompt
            if (prompt.includes("translate")) {
                const languages = {
                    es: "Spanish",
                    fr: "French",
                    de: "German",
                    en: "English"
                };
                const targetLang = prompt.match(/to (\w+)/i)?.[1]?.toLowerCase() || "Spanish";
                const langName = languages[targetLang] || "Spanish";
                return `[Translated to ${langName}] ${prompt.split('"')[1] || "Hello"}`;
            }
            else if (prompt.includes("joke")) {
                const jokes = [
                    "Why don't scientists trust atoms? Because they make up everything!",
                    "Did you hear about the mathematician who's afraid of negative numbers? He'll stop at nothing to avoid them!",
                    "Why don't skeletons fight each other? They don't have the guts!",
                    "I told my wife she was drawing her eyebrows too high. She looked surprised."
                ];
                return jokes[Math.floor(Math.random() * jokes.length)];
            }
            else if (prompt.includes("fact")) {
                const facts = [
                    "Honey never spoils. Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still perfectly good to eat.",
                    "Octopuses have three hearts, nine brains, and blue blood.",
                    "The shortest war in history was between Britain and Zanzibar on August 27, 1896. Zanzibar surrendered after 38 minutes.",
                    "A day on Venus is longer than a year on Venus. It takes Venus 243 Earth days to rotate once on its axis, but only 225 Earth days to orbit the Sun."
                ];
                return facts[Math.floor(Math.random() * facts.length)];
            }
            else if (prompt.includes("summarize")) {
                return "This conversation has been friendly and positive, covering various topics. The general sentiment is constructive and engaging.";
            }
            else if (prompt.includes("sentiment")) {
                return "Positive";
            }
            else if (prompt.includes("elaborate")) {
                return "The message discusses the importance of clear communication. To elaborate, effective communication involves not just speaking but also active listening, understanding non-verbal cues, and adapting your message to your audience's needs and context.";
            }
            
            return "Here's some information about your request...";
        }

        // Translate last message
        async function translateLastMessage() {
            if (messagesWrapper.children.length <= 1) {
                showNotification("No message to translate.");
                return;
            }

            isTranslating = true;
            translateButton.disabled = true;
            translateButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Translating...';
            updateSendButton();

            const lastMessageEl = messagesWrapper.children[messagesWrapper.children.length - 2];
            const lastMessageText = lastMessageEl.querySelector('.message-text').textContent;
            const targetLanguage = languageSelect.value;
            const languageName = languageSelect.options[languageSelect.selectedIndex].text;

            const prompt = `Translate the following English text to ${languageName}: "${lastMessageText}"`;

            try {
                // Simulate API call (replace with actual API call in production)
                const translatedText = await simulateAIRequest(prompt);
                openModal('translateModal', translatedTextContent, translatedText);
                playNotificationSound();
            } catch (error) {
                console.error("Error translating message:", error);
                showNotification("Error translating message. Please try again.");
            } finally {
                isTranslating = false;
                translateButton.innerHTML = '<i class="fas fa-language"></i> Translate Last Message';
                updateSendButton();
            }
        }

        // Generate Joke
        async function generateJoke() {
            isGeneratingJoke = true;
            jokeButton.disabled = true;
            jokeButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Getting Joke...';
            updateSendButton();

            const prompt = "Tell me a short, family-friendly joke.";

            try {
                // Simulate API call
                const joke = await simulateAIRequest(prompt);
                openModal('jokeModal', jokeTextContent, joke);
                playNotificationSound();
            } catch (error) {
                console.error("Error generating joke:", error);
                showNotification("Error getting joke. Please try again.");
            } finally {
                isGeneratingJoke = false;
                jokeButton.innerHTML = '<i class="fas fa-laugh-squint"></i> Tell Me a Joke';
                updateSendButton();
            }
        }

        // Generate Fact
        async function generateFact() {
            isGeneratingFact = true;
            factButton.disabled = true;
            factButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Getting Fact...';
            updateSendButton();

            const prompt = "Tell me one interesting and surprising random fact.";

            try {
                // Simulate API call
                const fact = await simulateAIRequest(prompt);
                openModal('factModal', factTextContent, fact);
                playNotificationSound();
            } catch (error) {
                console.error("Error generating fact:", error);
                showNotification("Error getting fact. Please try again.");
            } finally {
                isGeneratingFact = false;
                factButton.innerHTML = '<i class="fas fa-lightbulb"></i> Random Fact';
                updateSendButton();
            }
        }

        // Summarize Chat
        async function summarizeChat() {
            if (messagesWrapper.children.length <= 1) {
                showNotification("No messages to summarize.");
                return;
            }

            isSummarizing = true;
            summarizeButton.disabled = true;
            summarizeButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Summarizing...';
            updateSendButton();

            // Get the last 10 actual messages (excluding typing indicator)
            const messages = Array.from(messagesWrapper.children)
                                .filter(el => !el.classList.contains('typing-indicator'))
                                .slice(-10)
                                .map(el => {
                                    const sender = el.classList.contains('user') ? 'You' : el.querySelector('.sender-name')?.textContent.trim() || 'Other';
                                    const text = el.querySelector('.message-text')?.textContent;
                                    return `${sender}: ${text}`;
                                }).join('\n');

            const prompt = `Please summarize the following chat conversation:\n\n${messages}\n\nSummary:`;

            try {
                // Simulate API call
                const summary = await simulateAIRequest(prompt);
                openModal('summarizeModal', summarizeTextContent, summary);
                playNotificationSound();
            } catch (error) {
                console.error("Error summarizing chat:", error);
                showNotification("Error summarizing chat. Please try again.");
            } finally {
                isSummarizing = false;
                summarizeButton.innerHTML = '<i class="fas fa-file-alt"></i> Summarize Chat';
                updateSendButton();
            }
        }

        // Analyze Sentiment
        async function analyzeSentiment() {
            if (messagesWrapper.children.length <= 1) {
                showNotification("No message to analyze sentiment for.");
                return;
            }

            isAnalyzingSentiment = true;
            sentimentButton.disabled = true;
            sentimentButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            updateSendButton();

            const lastMessageEl = messagesWrapper.children[messagesWrapper.children.length - 2];
            const lastMessageText = lastMessageEl.querySelector('.message-text').textContent;

            const prompt = `Analyze the sentiment of the following message. Respond with only one word: Positive, Negative, or Neutral.\n\nMessage: "${lastMessageText}"`;

            try {
                // Simulate API call
                const sentimentResult = await simulateAIRequest(prompt);
                openModal('sentimentModal', sentimentTextContent, `Sentiment: ${sentimentResult.trim()}`);
                playNotificationSound();
            } catch (error) {
                console.error("Error analyzing sentiment:", error);
                showNotification("Error analyzing sentiment. Please try again.");
            } finally {
                isAnalyzingSentiment = false;
                sentimentButton.innerHTML = '<i class="fas fa-smile-beam"></i> Analyze Sentiment';
                updateSendButton();
            }
        }

        // Elaborate on Last Message
        async function elaborateOnMessage() {
            if (messagesWrapper.children.length <= 1) {
                showNotification("No message to elaborate on.");
                return;
            }

            isElaborating = true;
            elaborateButton.disabled = true;
            elaborateButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Elaborating...';
            updateSendButton();

            const lastMessageEl = messagesWrapper.children[messagesWrapper.children.length - 2];
            const lastMessageText = lastMessageEl.querySelector('.message-text').textContent;

            const prompt = `Elaborate on the following message, providing more detail or a different perspective:\n\nMessage: "${lastMessageText}"`;

            try {
                // Simulate API call
                const elaboration = await simulateAIRequest(prompt);
                openModal('elaborateModal', elaborateTextContent, elaboration);
                playNotificationSound();
            } catch (error) {
                console.error("Error elaborating on message:", error);
                showNotification("Error elaborating. Please try again.");
            } finally {
                isElaborating = false;
                elaborateButton.innerHTML = '<i class="fas fa-pen-nib"></i> Elaborate';
                updateSendButton();
            }
        }

        // Event listeners for new features
        translateButton.addEventListener('click', translateLastMessage);
        jokeButton.addEventListener('click', generateJoke);
        factButton.addEventListener('click', generateFact);
        summarizeButton.addEventListener('click', summarizeChat);
        sentimentButton.addEventListener('click', analyzeSentiment);
        elaborateButton.addEventListener('click', elaborateOnMessage);

        // Add ripple effect to clickable elements
        function addRippleEffect() {
            document.querySelectorAll('.app-icon, .theme-toggle, .sound-toggle, .message-avatar, .message-bubble, .action-btn, .emoji-reaction, .send-button, .action-button, .modal-close-btn').forEach(el => {
                el.addEventListener('click', function(e) {
                    // The ripple effect is handled via CSS pseudo-elements
                });
            });
        }

        // Event listeners
        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            sendMessage(messageInput.value);
        });

        messageInput.addEventListener('input', updateSendButton);

        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage(messageInput.value);
            }
        });

        themeToggle.addEventListener('click', toggleTheme);
        soundToggle.addEventListener('click', toggleSound);

        // Initial setup
        loadPreferences();
        updateSendButton();
        addRippleEffect();
        setTimeout(scrollToBottom, 100);
        messageInput.focus();

        // Show welcome notification
        setTimeout(() => {
            showNotification('Welcome to ChatRipple! Try the new features like translation and sentiment analysis! ðŸŒŠ');
        }, 1000);
    </script>
</body>
</html>